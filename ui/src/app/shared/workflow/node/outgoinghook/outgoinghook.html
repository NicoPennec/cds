<div class="workflowHook pointing" (click)="openEditHookSidebar()" 
    [class.active]="isSelected"
    [class.building]="currentHookRun?.status === pipelineStatus.BUILDING || currentHookRun?.status === pipelineStatus.WAITING"
    [class.success]="currentHookRun?.status === pipelineStatus.SUCCESS"
    [class.fail]="currentHookRun?.status === pipelineStatus.FAIL || currentHookRun?.status === pipelineStatus.STOPPED">
    <div class="name">
        <i class="{{icon}} icon"></i> <b>{{hook.model.name}}</b>
    </div>
    
    <ng-container *ngIf="hook.model.name === 'WebHook'" >
        <div class="details">
            {{ hook.config['method']?.value }} {{ hook.config['URL']?.value }}
        </div>
    </ng-container>

    <ng-container *ngIf="hook.model.name === 'Workflow'" >
        <div class="details"> 
            <ng-container *ngIf="currentHookRun && currentHookRun.callback  && (
                currentHookRun.callback.status === pipelineStatus.BUILDING  ||
                currentHookRun.callback.status === pipelineStatus.SUCCESS ||
                currentHookRun.callback.status === pipelineStatus.FAIL )">
                <a [routerLink]="['/project', hook.config['target_project'].value, 'workflow', hook.config['target_workflow'].value, 'run', currentHookRun.callback.workflow_run_number]"
                    target="_blank">
                        {{ hook.config['target_project']?.value }}/{{ hook.config['target_workflow']?.value }} #{{currentHookRun.callback.workflow_run_number}}
                </a>
            </ng-container>
            <ng-container *ngIf="!currentHookRun || currentHookRun?.status === pipelineStatus.WAITING">
                {{ hook.config['target_project']?.value }}/{{ hook.config['target_workflow']?.value }}/{{ hook.config['target_hook']?.value }}
            </ng-container>
        </div>
    </ng-container>

    <ng-container *ngIf="currentHookRun">
        <div class="fixed subnumber" >
            <i class="tag icon"></i>
            {{ currentHookRun?.subnumber }}
        </div>
    </ng-container>
</div>

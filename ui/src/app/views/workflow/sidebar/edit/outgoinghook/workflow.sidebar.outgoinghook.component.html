<div class="sidebar-hook" *ngIf="hook">
    <h3 class="ui header ml5">
        <i class="settings icon"></i>
        <div class="content">
            <span>Hook</span>
            <div class="sub header">
              <span>{{ 'workflow_node_edition' | translate }}</span>
            </div>
        </div>
    </h3>

    <div class="ui fluid vertical menu noborder">
      <a class="item noborder" (click)="openHookEditModal()">
        <span *ngIf="workflow.permission === permissionEnum.READ_WRITE_EXECUTE">{{'btn_edit' | translate}}</span><span *ngIf="workflow.permission < permissionEnum.READ_WRITE_EXECUTE">Configuration</span> <i class="angle right icon"></i>
      </a>
      <a class="item noborder" (click)="openDeleteHookModal()" [class.disabled]="workflow.permission < permissionEnum.READ_WRITE_EXECUTE">
        {{'btn_delete' | translate}} <i class="angle right icon"></i>
      </a>
      <a class="item noborder" (click)="openTriggerModal()"
          *ngIf="!(workflow.from_repository && workflow.from_repository.length > 0)"
          [class.disabled]="workflow.permission < permissionEnum.READ_WRITE_EXECUTE">
          {{ 'workflow_node_trigger_add' | translate }} <i class="angle right icon"></i>
      </a>
    </div>

    <div class="ui active centered inline loader" *ngIf="loading"></div>
</div>

<div class="ui text active loader" *ngIf="!hook">{{ 'workflow_loading' | translate }}</div>

<app-workflow-node-hook-form
    [project]="project"
    [workflow]="workflow"
    [node]="node"
    (hookEvent)="updateOutgoingHook($event)"
    [loading]="loading"
    [readonly]="workflow.permission < permissionEnum.READ_WRITE_EXECUTE"
    isOutgoing="true"
    [outgoingHook]="hook" #workflowEditHook>
</app-workflow-node-hook-form>

<app-delete-modal
    [title]="'workflow_hook_delete_title' | translate"
    [msg]="'workflow_hook_delete_msg' | translate"
    (event)="deleteOutgoingHook()" #deleteHookModal>
</app-delete-modal>

<app-workflow-node-hook-details #workflowDetailsHook>
</app-workflow-node-hook-details>

<ng-container *ngIf="project && node">
    <app-workflow-trigger [loading]="loading" [project]="project" [workflow]="workflow" [source]="hook?.model?.name"
        [(trigger)]="newTrigger" (triggerChange)="saveTrigger()"
        #workflowTrigger></app-workflow-trigger>
</ng-container>